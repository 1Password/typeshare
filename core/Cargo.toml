[package]
name = "typeshare-core"
rust-version = "1.57"
edition = "2021"
description = "The code generator used by Typeshare's command line tool"
authors.workspace = true
license.workspace = true
repository.workspace = true
version.workspace = true

[dependencies]
log = {workspace=true}
lazy_format = {workspace=true}
thiserror = {workspace=true}
serde = { workspace=true}
strum = { workspace=true}
itertools = "0.11"

quote = "1"

joinery = {workspace=true}
anyhow = "1"
ignore = { version = "0.4" }
semver = {workspace=true}
tabled = {version = "0.14", optional = true}
# What is needed to parse files with the rust-parsing feature
proc-macro2 = { version = "1", optional = true }
syn = { version = "2", features = ["full","extra-traits"], optional = true }
# Exported in the cli feature under the cli module
clap = { workspace=true, optional = true }
clap_complete = { workspace=true ,optional = true}
toml = { workspace=true,optional = true }
rayon = { workspace=true, optional = true }
simple-log = { version = "1" ,optional = true}
[features]
cli = ["clap", "clap_complete", "toml", "rayon", "simple-log"]
rust-parsing= ["syn", "proc-macro2"]
# Mostly for testing
serde-everything = []
[dev-dependencies]
anyhow = "1"
expect-test = "1.1"
once_cell = "1"
toml = {workspace=true}